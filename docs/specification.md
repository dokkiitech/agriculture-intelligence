# 仕様書（仕様書駆動開発）

## 1. ドキュメント情報
- ドキュメントID: SVD-HG-001
- バージョン: v0.3（確定事項反映版）
- 作成日: 2026-02-14
- 更新日: 2026-02-14
- 作成者: プロダクトチーム
- ステータス: Draft

## 2. 背景と目的
- 背景:
  - 家庭菜園の継続課題として「虫・病気対策」「天候」があり、初心者では「時間がない」「相談できない」が強い。
  - 既存の家庭菜園アプリは記録中心で、成長状態の可視化や具体的アドバイスが弱い。
  - インタビューでは「機能は多くいらない。基本機能で十分」という声があり、UI/機能のシンプルさが重視された。
- 解決したい課題:
  - 1〜3年の家庭菜園経験者が、勘頼みの管理から脱却できず、中級以上に進みにくい。
  - 経験者は病気判別、未経験者は水やり判断が分からず失敗しやすい。
  - 忙しい親世代が、子どもと一緒に継続できる共通体験を作りづらい。
- 目的:
  - 写真比較と最小限の助言機能で生育状態を可視化し、失敗（枯れ・病害虫）を減らして継続率を上げる。
- 成功条件（ビジネス観点）:
  - 無料プランで継続利用を獲得し、有料機能（病害虫判別/水やり最適化）へ転換する。
  - 価格許容（目安1,000円）を満たし、買い切りオプションの受容性を確認する。
  - 家庭菜園ユーザー向け月額課金、および将来的な農家向けDX支援の二面展開を成立させる。
  - MVP主要KPIとして4週継続率を改善する。

## 3. スコープ
### 3.1 対象（MVP）
- ターゲット: 家庭菜園歴1〜3年程度の「脱初心者」層（病気判別や水やり判断に迷う層）。
- 仮ペルソナ:
  - 35歳男性、既婚、小学生の子どもあり、小倉在住、製造業勤務、年収450万円、2LDK賃貸、車あり。
- 解決対象:
  - 写真をアップロードし、数日前の写真と比較して生育健全度を数値化する機能。
  - 病気の可能性判別と、水やり/肥料量の目安提示。
  - 成長記録（日記形式）と、基本的な栽培知識・タイミング通知。
  - 子どもが継続参加しやすいゲーム要素（MVP簡易版）。
  - MVP対象作物はトマト・きゅうり・いちごの3種に固定する。
  - 今回はモックとして「動いているように見える体験」を実現する。

### 3.2 対象外（MVP時点）
- 独自ハードウェアの量産開発（センサー自作検討はPoC扱い）。
- 高度な農家向け分析（収穫予測、圃場最適化）本実装。
- フル機能EC（MVPでは外部購入導線または簡易導線まで）。
- 常時表示モニター型デバイス（スマホ管理中心のため）。
- インタビューで「興味がない」層への訴求施策。
- バックエンド実装およびDB接続（本段階では実施しない）。

## 4. 用語定義
| 用語 | 定義 |
| --- | --- |
| 健全度スコア | 現在写真と過去写真の比較から算出する生育状態の指標（0〜100） |
| 脱初心者 | 栽培経験はあるが、病害虫や管理判断で失敗しやすい層 |
| 無料プラン | 記録・基礎知識・通知を提供するプラン |
| 有料プラン | 画像解析、センサー連携など高度機能を提供するプラン |
| 買い切りオプション | ハードウェアまたは追加機能を月額なしで購入できる提供形態 |
| MVP対象作物 | トマト・きゅうり・いちご（固定） |

## 5. 要件
### 5.1 機能要件
| ID | 要件名 | 内容 | 優先度（Must/Should/Could） |
| --- | --- | --- | --- |
| FR-001 | 写真アップロード | ユーザーは栽培中野菜の写真をアップロードできる | Must |
| FR-002 | 経時比較 | システムは最新写真と数日前の写真を比較できる | Must |
| FR-003 | 健全度数値化 | 画像差分とユーザー入力を根拠に、0〜100の健全度スコアを表示する | Must |
| FR-004 | 成長記録 | 写真・メモ・日付をタイムライン表示する | Must |
| FR-005 | 病害虫判別 | 画像から病名候補を表示する | Must |
| FR-006 | 水やり/肥料目安提示 | 作物・時期・天候を加味して回数を提案する | Must |
| FR-007 | 基礎知識提供 | 作物別の基本情報（時期、土、管理ポイント）を表示する | Should |
| FR-008 | 栽培タイミング通知 | 種まき/追肥/水やり等のタイミング通知を行う | Should |
| FR-009 | センサー連携 | 土壌水分データを取り込み、水やり判断に反映する | Could |
| FR-010 | 外観カスタマイズ | 背景画像など見た目変更機能 | Could |
| FR-011 | 設置調和デザイン | ハードがある場合、庭やプランターで違和感の少ない見た目を提供する | Could |
| FR-012 | 地域自動取得 | GPSで地域を取得し、天候連動助言に利用する | Must |
| FR-013 | 子ども向けゲーム要素 | 成長記録に応じた簡易な達成演出を提供する | Should |

### 5.2 非機能要件
| 区分 | 要件 | 目標値/受入基準 |
| --- | --- | --- |
| 性能 | 画像解析結果の表示 | 画像アップロード完了から10秒以内（MVP目標） |
| 可用性 | 利用可能時間 | 月間稼働率99.0%以上（MVP目標） |
| セキュリティ | 画像・ユーザーデータ保護 | 通信TLS、認証必須、公開範囲は本人のみ |
| 保守性 | 機能拡張容易性 | 無料/有料機能を設定で切替可能 |
| 監視性 | 障害検知 | APIエラー率、解析失敗率、通知失敗率を監視 |
| 端末連携 | 位置情報利用 | GPS許可拒否時は手動地域入力へフォールバック |

## 6. ユースケース
### 6.1 ユーザー種別
- 家庭菜園ユーザー（無料）
- 家庭菜園ユーザー（有料）
- 管理者（知識コンテンツ、通知ルール管理）

### 6.2 ユースケース一覧
| ID | ユースケース | 主担当 | 概要 |
| --- | --- | --- | --- |
| UC-001 | 生育写真を投稿する | 家庭菜園ユーザー | 画像とメモを登録する |
| UC-002 | 健全度を確認する | 家庭菜園ユーザー | 過去比較とスコアを確認する |
| UC-003 | 栽培アドバイスを受ける | 家庭菜園ユーザー | 状態に応じた助言を確認する |
| UC-004 | 通知を受けて管理する | 家庭菜園ユーザー | タイミング通知で作業する |
| UC-005 | 病名候補を確認する | 家庭菜園ユーザー（有料） | 画像から病名候補を確認する |
| UC-006 | 子どもと達成演出を見る | 家庭菜園ユーザー | 投稿継続で演出を確認する |

### 6.3 主要ユースケース詳細
- ユースケースID: UC-002 健全度を確認する
- 事前条件:
  - 同一作物の写真が2枚以上登録されている。
- トリガー:
  - ユーザーが「健全度を見る」を選択する。
- 基本フロー:
  1. システムは最新写真と指定期間前写真を取得する。
  2. システムは画像比較を実行し、健全度スコアを算出する。
  3. システムはスコア、変化サマリー、推奨アクションを表示する。
- 代替フロー:
  - 比較対象が不足している場合、追加撮影を案内する。
- 例外フロー:
  - 画像解析失敗時は再試行案内と手動記録導線を表示する。
- 事後条件:
  - ユーザーが現在状態と次アクションを判断できる。

## 7. 画面/インターフェース仕様
### 7.0 デザイン参照
- 参照デザイン（モック）: `/Users/dokkiitech/dev/sw-vol-13/植物生育管理アプリ`
- 本MVPでは上記デザインを画面実装の一次参照とする。

### 7.1 画面一覧
| 画面ID | 画面名 | 概要 |
| --- | --- | --- |
| SCR-001 | ホーム/ダッシュボード | 今日の作業、通知、健全度サマリー |
| SCR-002 | 写真投稿画面 | 画像、作物、メモの登録 |
| SCR-003 | 成長タイムライン | 過去記録の時系列表示 |
| SCR-004 | 健全度詳細 | 比較画像、スコア、推奨行動 |
| SCR-005 | 作物知識ライブラリ | 作物別の育成ガイド |
| SCR-006 | 病害虫診断結果 | 病名候補、対処の初動案内 |
| SCR-007 | キッズ達成画面 | 連続投稿等に応じた演出表示 |

### 7.2 API/外部I/F一覧
| IF ID | 種別 | エンドポイント/連携先 | 入力 | 出力 | 備考 |
| --- | --- | --- | --- | --- | --- |
| IF-001 | 内部API（モック） | `/api/photos` | 画像、作物ID、メモ | 記録ID | モックレスポンスのみ |
| IF-002 | 内部API（モック） | `/api/health-score` | 現在画像ID、比較期間 | スコア、差分説明 | MVP中核（モック） |
| IF-003 | 外部API | 天気API（候補） | 地域、日付 | 降雨予報、気温 | 水やり助言に使用 |
| IF-004 | 外部I/F | センサー入力 | 水分段階/数値 | 水やり助言 | 段階導入（棒型想定） |
| IF-005 | 端末API | Geolocation API | 位置情報許可 | 緯度経度 | 地域自動取得 |

## 8. データ仕様
### 8.1 エンティティ一覧
| エンティティ | 説明 |
| --- | --- |
| User | ユーザー基本情報、プラン種別 |
| PlantProfile | 作物情報、栽培開始日、育成環境 |
| GrowthRecord | 写真、メモ、撮影日時、作業記録 |
| HealthScore | 比較対象、スコア、判定理由、生成日時 |
| Notification | 通知種別、送信時刻、既読状態 |
| DiagnosisResult | 病名候補、信頼度、判定日時 |

### 8.2 データ項目定義（MVP主要）
| 項目名 | 型 | 必須 | 制約 | 説明 |
| --- | --- | --- | --- | --- |
| health_score | number | 必須 | 0〜100 | 生育健全度 |
| compared_at | datetime | 必須 | ISO 8601 | 比較実行時刻 |
| current_photo_url | string | 必須 | 画像形式制限あり | 最新画像 |
| baseline_photo_url | string | 必須 | 同一作物のみ | 比較基準画像 |
| advice_text | string | 任意 | 500文字以内 | 推奨アクション |
| user_input_note | string | 任意 | 300文字以内 | ユーザー入力（症状/状態） |
| candidate_disease_names | string[] | 任意 | 最大3件 | 病名候補 |

## 9. 制約・前提・依存関係
- 制約:
  - 初期は「高精度最適化」より「低コスト・分かりやすさ」を優先する。
  - MVP対象作物はトマト・きゅうり・いちごに固定する。
  - 多機能化より、日常運用に必要な最小機能に絞る。
  - 本段階はモック実装とし、画面上での体験再現を優先する。
- 前提:
  - インタビュー結果によりターゲット、課題、価値提案をピボットする。
  - 画像解析ロジックは段階的に改善する（初期は簡易モデル可）。
  - UIはスマホ中心で利用し、専用モニターは不要。
  - センサー連携は自作棒型PoCを前提に検証する。
  - データは固定データまたはローカル状態で扱い、DB永続化は行わない。
- 依存関係:
  - 画像解析基盤（将来）
  - 通知配信基盤（将来）
  - GPS利用（Geolocation API）
  - 自作棒型センサーPoC仕様

## 10. 受け入れ基準（Acceptance Criteria）
| AC ID | 対象要件 | 条件（Given） | 操作（When） | 期待結果（Then） |
| --- | --- | --- | --- | --- |
| AC-001 | FR-001 | ログイン済みユーザー | 写真とメモを投稿 | 記録が保存されタイムラインに表示される |
| AC-002 | FR-002/003 | 同一作物で2件以上の記録あり | 健全度算出を実行 | 0〜100のスコアと比較結果が表示される |
| AC-003 | FR-004 | 複数記録あり | タイムラインを開く | 日付順に記録が確認できる |
| AC-004 | FR-005 | 葉や実の写真が投稿済み | 病害虫判別を実行 | 病名候補が表示される |
| AC-005 | FR-006/012 | GPS許可済みかつ作物設定済み | 水やり提案を確認 | 雨予報を考慮した水やり/肥料の回数提案が表示される |
| AC-006 | FR-007 | 作物が選択済み | 作物詳細を開く | 基本知識が表示される |
| AC-007 | FR-008 | 通知許可済み | 通知時刻到達 | 栽培作業通知が配信される |
| AC-008 | FR-013 | キッズモード有効 | 投稿継続条件を満たす | 達成演出が表示される |

## 11. テスト観点
- 正常系:
  - 写真投稿、健全度算出、病名候補表示、タイムライン表示が一連で成功する。
- 異常系:
  - 画像形式不正、比較画像不足、解析エラー、GPS拒否時のガードが動作する。
- 境界値:
  - スコア0/100、メモ文字数上限、短期間連続投稿。
- セキュリティ:
  - 他ユーザー画像の参照不可、認証なしAPI拒否。
- 回帰:
  - 無料機能が有料機能実装で毀損しないこと。

## 12. リスクと対応
| リスク | 影響 | 対応策 |
| --- | --- | --- |
| 解析精度が低く信頼されない | 継続率低下 | MVPは「参考値」と明示し、説明可能な差分表示を優先 |
| ターゲット仮説が外れる | PMF遅延 | インタビューで早期検証し、ペルソナを更新 |
| センサー価格が高止まり | 有料化障壁 | 段階課金と外部既製品連携から開始 |
| 記録入力が面倒 | 離脱増加 | 1タップ投稿導線、通知で習慣化支援 |
| サブスク忌避が強い | 収益化遅延 | 月額と買い切りを併記してA/B検証する |
| GPS許可が取得できない | 天候助言品質低下 | 手動地域入力を代替提供する |

## 13. マネタイズ仮説（要検証）
- 家庭菜園ユーザー:
  - 無料プラン: 記録・基礎知識・通知
  - 有料プラン: 病害虫判別（病名候補表示）
  - 水やり/肥料回数提案は無料提供で継続率向上に寄与
  - 価格仮説:
    - 買い切り先行
    - デジタル機能: 買い切り1,000円帯を中心に検証
    - デバイス機能: 買い切り1,000円帯（見た目価値ありなら3,000円帯）を検証
- 農家向け（将来）:
  - 初期費用10万円、月額5,000円（仮）
  - 記録自動化による工数削減、可視化による収量改善を訴求

## 14. 変更履歴
| 日付 | バージョン | 変更内容 | 変更者 |
| --- | --- | --- | --- |
| 2026-02-14 | v0.1 | 初版作成（ヒアリング前仮説の反映） | Codex |
| 2026-02-14 | v0.2 | インタビュー結果反映（優先課題・価格仮説・提供形態の更新） | Codex |
| 2026-02-14 | v0.3 | 確定回答反映（MVP作物固定、判定仕様、課金方針、KPI、対象外更新） | Codex |
| 2026-02-14 | v0.4 | モック方針追記（バックエンド/DB未接続を明確化） | Codex |

## 15. インタビュー要点（記録）
- 興味喚起:
  - 「成長スピードの差が見える」と関心が高まる。
- 栽培実績:
  - トマト・いちご経験あり。いちごは難易度高め。
  - 夏作で、きゅうりが不作だった事例あり（周囲でも同傾向）。
- ニーズ:
  - 病気かどうかを写真で判断したい。
  - 水やりは天候連動で「今は不要、2日後雨」など具体助言が欲しい。
  - 水と肥料の必要量を知りたい。
- デバイス/UI:
  - 専用モニターは不要、スマホで完結したい。
  - センサーは「棒を差すだけ」の簡便さが望ましい。
  - 見た目の違和感が少ないデザインが重要。
- 支払い許容:
  - 1,000円程度なら支払い可能という声あり。
  - 見た目価値が高い場合は3,000円でも購入意向あり。
- 補足:
  - 経験者は病気、未経験者は水やりが主要課題になりやすい。
  - 子どもがゲーム感覚で楽しめる体験ニーズがある。

## 16. 確定事項（2026-02-14）
- MVP対象作物: トマト・きゅうり・いちご（固定）
- 健全度算出根拠: 画像差分 + ユーザー入力
- 病害虫判別: 病名候補まで表示
- 水やり/肥料助言: 回数提案
- 天気連動地域取得: GPS自動
- 有料境界: 病害虫判別（病名候補）
- 課金モデル優先: 買い切り
- センサー連携: 自作棒型PoC
- 子ども向けゲーム要素: MVPに含める
- 見た目要件: MVPはアプリUIのみ
- 主要KPI: 4週継続率
- 「興味がない」層: MVP対象外
- 実装方針: 今回はモックで動作して見える状態を目標とし、バックエンド/DB接続は行わない
